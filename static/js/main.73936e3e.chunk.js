(this.webpackJsonpweatherapp=this.webpackJsonpweatherapp||[]).push([[0],{78:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a,i,r=n(0),c=n.n(r),o=n(14),s=n.n(o),u=(n(78),n(66)),l=n(20),p=n(17),d=n(18),h=n(21),m=n(34),j=n.n(m),b=n(45),f=n(6),x=n(49),g=n.n(x),O=function(e){var t=new Date,n=t.getTime(),a=6e4*t.getTimezoneOffset(),i=new Date(n+a+1e3*e);return g()(i).format("dddd, MMMM Do YYYY, h:mm:ss a")},y=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,i,r,c,o,s,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g()().subtract(1,"days").unix(),e.next=3,fetch("https://weather-app-backend-project.herokuapp.com/weather/history/".concat(a,"/").concat(t,"/").concat(n));case 3:return i=e.sent,e.next=6,i.json();case 6:return r=e.sent,c=r.hourly.map((function(e){var t=e.dt;return g.a.unix(t).format("hA, MMM D")})),o=r.hourly.map((function(e){return e.temp})),s=r.hourly.map((function(e){return e.humidity})),(u=c.map((function(e,t){return[e,o[t],s[t]]}))).unshift(["Time in ".concat(r.timezone),"Temp","Humidity"]),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=n(125),w=n(57),C=n(4),D=function(e){var t=e.city,n=e.data,a=e.setChartData;return Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(C.jsx)(w.a,{width:"500px",height:"300px",chartType:"AreaChart",loader:Object(C.jsx)("div",{children:"Loading Chart"}),data:n,options:{title:"24Hrs weather report of ".concat(t),hAxis:{title:"Time at ".concat(t),titleTextStyle:{color:"#333"}},vAxis:{minValue:0},chartArea:{width:"auto",height:"auto"}}}),Object(C.jsx)(v.a,{onClick:function(){return a(null)},children:"Go Back"})]})},k=n(135),S=n(129),T=n(130),I=n(131),A=n(132),M=function(e){var t=e.setData,n=e.name,a=e.temp,i=e.humidity,r=e.description,c=e.iconURL,o=e.timezone,s=e.classes,u=e.image;return Object(C.jsxs)(S.a,{className:s.card,onClick:function(){return t()},style:{cursor:"pointer"},children:[Object(C.jsx)(T.a,{className:s.media,image:u}),Object(C.jsxs)(I.a,{className:s.content,style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"20px"},children:[Object(C.jsx)(A.a,{className:"MuiTypography--heading",variant:"h6",gutterBottom:!0,children:n.toUpperCase()}),Object(C.jsx)(A.a,{className:"MuiTypography--heading",variant:"caption",gutterBottom:!0,children:"Temperature: ".concat(a," C")}),Object(C.jsx)(A.a,{className:"MuiTypography--subheading",variant:"subtitle1",children:"Humidity: ".concat(i)}),Object(C.jsx)(A.a,{className:"MuiTypography--subheading",variant:"caption",children:"".concat(r)}),Object(C.jsx)(k.a,{className:s.avatar,src:"".concat(c)}),Object(C.jsx)(A.a,{className:"MuiTypography--heading",variant:"h6",gutterBottom:!0,style:{textAlign:"center"},children:O(o,new Date)})]})]})},N=Object(f.a)((function(e){return{card:{maxWidth:300,margin:"20px",transition:"0.3s",boxShadow:"0 8px 40px -12px rgba(0,0,0,0.3)","&:hover":{boxShadow:"0 16px 70px -12.125px rgba(0,0,0,0.3)"}},media:{paddingTop:"56.25%"},content:{textAlign:"left",padding:e.spacing(3)},divider:{margin:"".concat(e.spacing(3),"px 0")},heading:{fontWeight:"bold"},subheading:{lineHeight:1.8},avatar:{display:"inline-block",border:"2px solid white"}}}))((function(e){var t=e.coord,n=e.main,a=n.temp,i=n.humidity,c=e.name,o=e.timezone,s=e.weather,u=e.classes,p=Object(r.useState)("https://st4.depositphotos.com/14953852/22772/v/1600/depositphotos_227725020-stock-illustration-image-available-icon-flat-vector.jpg"),d=Object(l.a)(p,2),h=d[0],m=d[1],f=Object(r.useState)(null),x=Object(l.a)(f,2),g=x[0],O=x[1],v={lat:t.lat,lon:t.lon,temp:a,humidity:i,name:c,timezone:o,description:s[0].main,iconURL:"http://openweathermap.org/img/wn/".concat(s[0].icon,"@2x.png"),time:null};Object(r.useEffect)((function(){return e=v.name.toLowerCase(),t=m,void fetch("https://weather-app-backend-project.herokuapp.com/image/".concat(e)).then((function(e){return e.json()})).then((function(e){e.photos&&t(e.photos[0].image.web)})).catch(console.log);var e,t}),[v.name]);var w=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(v.lat,v.lon);case 2:t=e.sent,O(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g?Object(C.jsx)(D,{city:v.name,data:g,setChartData:O}):Object(C.jsx)(M,{classes:u,setData:w,timezone:v.timezone,name:v.name,temp:v.temp,humidity:v.humidity,description:v.description,iconURL:v.iconURL,image:h})})),P=Object(r.createContext)(null),L=function(){var e=Object(r.useContext)(P).weatherData;return Object(C.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",alignItems:"center"},children:e.map((function(e,t){return Object(C.jsx)(N,Object(h.a)({},e),t)}))})},B=n(134),U=n(133),z=d.a.div(a||(a=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n"]))),q=function(){var e=Object(r.useContext)(P).getCityData,t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],i=n[1];return Object(C.jsxs)(z,{children:[Object(C.jsx)(U.a,{required:!0,value:a,onChange:function(e){return i(e.target.value)},label:"Enter City Name"}),Object(C.jsx)(v.a,{onClick:function(){i(""),e(a)},style:{marginTop:"20px"},color:"primary",children:"Check"})]})},E=function(){var e=Object(r.useContext)(P),t=e.signOut,n=e.email;return Object(C.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",color:"red",alignItems:"center"},children:[Object(C.jsx)(B.a,{label:"Click on the weather cards to display graph!",color:"primary",variant:"outlined"}),Object(C.jsx)(q,{}),Object(C.jsxs)(v.a,{onClick:t,children:["Sign Out, ",n]})]})},R=d.a.div(i||(i=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),W=function(){return Object(C.jsxs)(R,{children:[Object(C.jsx)(E,{}),Object(C.jsx)(L,{})]})},G=n(31),F=n(37),H=(n(87),n(90),function(e,t,n){if(e){var a=_.doc("users/".concat(e.uid));return a.get().then((function(i){if(!i.exists){var r=e.email,c=new Date;a.set({email:r,createdAt:c,displayName:t,cities:[]}).then((function(){console.log("data saved successfully"),n&&n(e.uid)})).catch((function(e){return console.log("error setting user-\n",e)}))}})),a}});F.a.initializeApp({apiKey:"AIzaSyCyBjo3rnKuBR6vaBlp6OPp2Lq0FmXGJCM",authDomain:"weather-app-319402.firebaseapp.com",databaseURL:"https://weather-app-319402-default-rtdb.firebaseio.com",projectId:"weather-app-319402",storageBucket:"weather-app-319402.appspot.com",messagingSenderId:"699875868598",appId:"1:699875868598:web:574769a1268e1eac1fcb17",measurementId:"G-NRZTGXQ9VB"});var Y,J,K,V,X,Q,Z=F.a.auth(),_=F.a.firestore(),$=new F.a.auth.GoogleAuthProvider,ee=function(){Z.signInWithRedirect($)},te=(F.a,d.a.div(Y||(Y=Object(p.a)(["\n  width: auto;\n  display: flex;\n  flex-direction: column;\n  margin: 20px;\n  input {\n    margin: 5px 10px;\n  }\n  button {\n    margin: 30px 0px;\n  }\n"])))),ne=d.a.h2(J||(J=Object(p.a)(["\n  margin: 10px 0px;\n"]))),ae=d.a.div(K||(K=Object(p.a)(["\n  margin: 10px 0px;\n\n  display: flex;\n  justify-content: space-between;\n"]))),ie=function(){var e=Object(r.useState)({email:"",password:""}),t=Object(l.a)(e,2),n=t[0],a=t[1],i=function(e){var t=e.target,i=t.name,r=t.value;a(Object(h.a)(Object(h.a)({},n),{},Object(G.a)({},i,r)))};return Object(C.jsxs)(te,{children:[Object(C.jsx)(ne,{children:"I already have an account"}),Object(C.jsx)("span",{children:"Sign in with your email and password"}),Object(C.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.email,i=n.password;Z.signInWithEmailAndPassword(t,i).then((function(e){a({email:"",password:""})})).catch((function(e){alert("Wrong email and password combination")}))},style:{display:"flex",flexDirection:"column"},children:[Object(C.jsx)(U.a,{name:"email",type:"email",value:n.email,onChange:i,label:"email",required:!0}),Object(C.jsx)(U.a,{name:"password",type:"password",value:n.password,onChange:i,label:"password",required:!0}),Object(C.jsxs)(ae,{children:[Object(C.jsx)(v.a,{type:"submit",children:"Sign In"}),Object(C.jsx)(v.a,{color:"primary",type:"button",onClick:ee,children:"Sign In With Google"})]})]})]})},re=d.a.div(V||(V=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  width: auto;\n  margin: 20px;\n  input {\n    margin: 5px 10px;\n  }\n  button {\n    margin: 30px 0px;\n  }\n"]))),ce=d.a.h2(X||(X=Object(p.a)(["\n  margin: 10px 0px;\n"]))),oe=function(){var e=Object(r.useState)({name:"",email:"",password:"",confirmPassword:""}),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useContext)(P).getUserData,c=function(e){var t=e.target,i=t.name,r=t.value;a(Object(h.a)(Object(h.a)({},n),{},Object(G.a)({},i,r)))};return Object(C.jsxs)(re,{children:[Object(C.jsx)(ce,{children:"I do have an account"}),Object(C.jsx)("span",{children:"Sign up with your email and password"}),Object(C.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.name,r=n.password,c=n.confirmPassword,o=n.email;r===c?r.length<6?alert("passwords should be atleast 6 characters"):Z.createUserWithEmailAndPassword(o,r).then((function(e){H(e.user,t,i),a({name:"",email:"",password:"",confirmPassword:""})})).catch((function(e){"auth/email-already-in-use"===e.code?alert("email already in use, please use a different email id"):console.log(e)})):alert("passwords don't match")},style:{display:"flex",flexDirection:"column"},children:[Object(C.jsx)(U.a,{type:"text",name:"name",value:n.name,onChange:c,label:"Name",required:!0}),Object(C.jsx)(U.a,{type:"email",name:"email",value:n.email,onChange:c,label:"Email",required:!0}),Object(C.jsx)(U.a,{type:"password",name:"password",value:n.password,onChange:c,label:"Password",required:!0}),Object(C.jsx)(U.a,{type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:c,label:"Confirm Password",required:!0}),Object(C.jsx)(v.a,{type:"submit",children:"Sign Up"})]})]})},se=d.a.div(Q||(Q=Object(p.a)(["\n  width: 100vw;\n  display: flex;\n  justify-content: space-evenly;\n  margin: 30px auto;\n"]))),ue=function(){return Object(C.jsxs)(se,{children:[Object(C.jsx)(ie,{}),Object(C.jsx)(oe,{})]})},le=function(e){return function(t){fetch("https://weather-app-backend-project.herokuapp.com/user/".concat(t)).then((function(e){return e.json()})).then((function(n){e(Object(h.a)(Object(h.a)({},n),{},{uid:t}))})).catch((function(){return console.log("error occured")}))}},pe=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)([]),c=Object(l.a)(i,2),o=c[0],s=c[1],p=function(e){var t=e.toLowerCase();o.find((function(e){return e.name.toLowerCase()===t}))?alert("'".concat(e,"' city already included")):fetch("https://weather-app-backend-project.herokuapp.com/weather/".concat(t,"/").concat(n.uid)).then((function(e){return e.json()})).then((function(e){e.weather?s((function(t){return[].concat(Object(u.a)(t),[e])})):alert("wrong input city")})).catch(console.log)};Object(r.useEffect)((function(){n&&n.cities.map((function(e){return p(e)}))}),[n]),Object(r.useEffect)((function(){return Z.onAuthStateChanged((function(e){if(e){var t=e.uid;e.providerData[0].providerId.includes("google")&&H(e,e.displayName,le(a)),n||le(a)(t)}else a(null)}))}),[]);return Object(C.jsx)(P.Provider,{value:{getCityData:p,weatherData:o,signOut:function(){Z.signOut().then((function(){a(null),s([]),console.log("signed out")})).catch("error signing out")},email:n&&n.email,getUserData:le(a)},children:n?Object(C.jsx)(W,{}):Object(C.jsx)(ue,{})})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,137)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))};s.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(pe,{})}),document.getElementById("root")),de()}},[[89,1,2]]]);
//# sourceMappingURL=main.73936e3e.chunk.js.map